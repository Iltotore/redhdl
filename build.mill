import mill.*, scalalib.*, scalafmt.*

object `package` extends ScalaModule with ScalafmtModule:

  def scalaVersion = "3.7.3"

  val kyoVersion = "v1.0-RC1-fix2"

  def repositories = Seq(
    "https://maven.enginehub.org/repo/",
    "https://jitpack.io/"
  )

  def mvnDeps = Seq(
    mvn"com.github.iltotore.kyo::kyo-core:$kyoVersion",
    mvn"com.github.iltotore.kyo::kyo-direct:$kyoVersion",
    mvn"com.github.iltotore.kyo::kyo-parse:$kyoVersion",
    mvn"io.github.iltotore::iron:3.2.0",
    mvn"com.github.Iltotore:NBT:6.1.1"
  )

  def scalacOptions = Seq(
    "-Wvalue-discard", 
    "-Wnonunit-statement", 
    "-Wconf:msg=(unused.*value|discarded.*value|pure.*statement):error",
    "-language:strictEquality"
  )

  override def ammoniteVersion = ""

  object test extends ScalaTests with TestModule.Utest:

    def utestVersion = "0.9.1"

    def compileResources = resources